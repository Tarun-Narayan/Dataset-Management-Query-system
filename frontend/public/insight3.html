<!DOCTYPE html>
<html lang="">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Insight 3: Line Chart</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<h1 id="courseHeading"></h1>
<canvas id="lineChart" width="800" height="400"></canvas>

<script>
	const urlParams = new URLSearchParams(window.location.search);
	const queryResult = JSON.parse(urlParams.get("queryResult3"));
	const years = queryResult[0];
	const averages = queryResult[1];
	const selectedCourse = urlParams.get("selectedCourse");
	if (selectedCourse) {
		document.getElementById("courseHeading").textContent = `Average Over Years for Selected Subject/Department: ${selectedCourse}`;
	}

	const ctx = document.getElementById("lineChart");
	new Chart(ctx, {
		type: "line",
		data: {
			labels: years,
			datasets: [{
				label: "Average Score",
				data: averages,
				backgroundColor: "rgba(75, 192, 192, 0.2)",
				borderColor: "rgba(75, 192, 192, 1)",
				borderWidth: 2,
				fill: true
			}]
		},
		options: {
			scales: {
				y: {
					beginAtZero: true
				}
			}
		}
	});
</script>
<button onclick="window.location.href='../index.html'">Back to Dashboard</button>
</body>
</html>
